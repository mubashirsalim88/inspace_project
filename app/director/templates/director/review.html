{% extends "base.html" %}
{% block title %}Review Application - IN-SPACe{% endblock %}
{% block content %}
<div class="p-8 bg-gray-100 min-h-screen">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">Review Application #{{ application.id }}</h2>
    
    <div class="bg-white p-6 rounded-lg shadow-lg border border-indigo-200 mb-6">
        <p><strong>Applicant:</strong> {{ application.user.username }}</p>
        <p><strong>Status:</strong> {{ application.status }}</p>
        <p><strong>Primary Verifier:</strong> {{ primary_verifier.name if primary_verifier else 'None' }}</p>
        <p><strong>Secondary Verifier:</strong> {{ secondary_verifier.name if secondary_verifier else 'None' }}</p>
        <p><strong>Module:</strong> {{ module_name|replace('_', ' ')|title }}</p>
        <p><a href="{{ pdf_download_url }}" class="text-indigo-600 hover:underline">Download PDF</a></p>
    </div>

    <form id="review-form" method="POST" class="bg-white p-6 rounded-lg shadow-lg border border-indigo-200">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="hidden" name="action" value="review">
        
        <div class="mb-4">
            <label class="block text-gray-700 font-semibold mb-2">Decision</label>
            <label class="inline-flex items-center mr-4">
                <input type="radio" name="decision" value="approve" required> Approve
            </label>
            <label class="inline-flex items-center">
                <input type="radio" name="decision" value="reject"> Reject
            </label>
        </div>
        
        <div class="mb-4">
            <label for="comments" class="block text-gray-700 font-semibold mb-2">Comments (required for rejection)</label>
            <textarea id="comments" name="comments" class="w-full p-2 border rounded-lg"></textarea>
        </div>
        
        <button type="submit" id="submit-btn" class="py-2 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold">Submit</button>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("review-form");
    const submitBtn = document.getElementById("submit-btn");

    form.addEventListener("submit", function () {
        submitBtn.disabled = true;
        submitBtn.textContent = "Processing...";
    });
});
</script>
{% endblock %}